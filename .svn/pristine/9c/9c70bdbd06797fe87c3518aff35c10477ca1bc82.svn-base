<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>新增订单</title>
  <link rel="stylesheet" href="../lib/layui-1.0.9/build/css/layui.css">
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/addOrder.css">
</head>
<body>
<div class="content_add">
  <form class="layui-form" action="">
    <div class="green_title fs20 mb20">
      <span class="t_r d_i">订单信息</span>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">用户账号</label>
      <div class="layui-input-inline">
        <input type="text" name="title" required  lay-verify="required" placeholder="请输入用户账号" autocomplete="off" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">服务分类</label>
      <div class="layui-input-inline">
        <select name="city" lay-verify="required">
          <option value=""></option>
          <option value="0">北京</option>
        </select>
      </div>
      <div class="layui-input-inline">
        <select name="city" lay-verify="required">
          <option value=""></option>
          <option value="0">北京</option>
        </select>
      </div>
      <div class="layui-input-inline">
        <select name="city" lay-verify="required">
          <option value=""></option>
          <option value="0">北京</option>
        </select>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">服务内容</label>
      <div class="layui-input-block">
        <input type="text" name="title" required  lay-verify="required" placeholder="请输入服务内容" autocomplete="off" class="layui-input">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">接受价格</label>
      <div class="layui-input-inline">
        <select name="city" lay-verify="required">
          <option value=""></option>
          <option value="0">北京</option>
        </select>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">标签选择</label>
      <div class="layui-input-block">
        <input type="checkbox" name="like[write]" title="迟到必赔">
        <input type="checkbox" name="like[read]" title="不满意退款" checked>
        <input type="checkbox" name="like[dai]" title="精品">
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">类型</label>
      <div class="layui-input-inline">
        <select name="city" lay-verify="required">
          <option value=""></option>
          <option value="0">北京</option>
        </select>
      </div>
    </div>
    <div class="layui-form-item layui-form-text">
      <label class="layui-form-label">用户备注</label>
      <div class="layui-input-block">
        <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="green_title fs20 mb20">
      <span class="t_r d_i">用户信息</span>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label">服务地址</label>
      <div class="layui-input-inline">
        <select name="city" lay-verify="required">
          <option value=""></option>
          <option value="0">北京</option>
        </select>
      </div>
      <button class="layui-btn">编辑</button>
      <button class="layui-btn">新增</button>
    </div>
    <div>
      <div class="layui-form-item">
        <label class="layui-form-label">联系人</label>
        <div class="layui-input-inline">
          <input type="text" name="title" required  lay-verify="required" placeholder="请输入联系人" autocomplete="off" class="layui-input">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">服务城市</label>
        <div class="layui-input-inline">
          <select name="city" lay-verify="required">
            <option value=""></option>
            <option value="0">北京</option>
          </select>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">坐标小区</label>
        <div class="layui-input-inline p_r">
          <input type="text" name="title" required id="suggestId"  lay-verify="required" placeholder="请输入小区名" autocomplete="off" class="layui-input">
          <div id="searchResultPanel" style="border:1px solid #C0C0C0;width:100%;height:auto; display:none;position: absolute;top: 40px;"></div>
        </div>
        <!--<button class="layui-btn">搜索</button>-->
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">服务时间</label>
        <div class="layui-input-inline">
          <input id="begin_time" class="layui-input">
        </div>
        <div class="layui-form-mid layui-word-aux"> : </div>
        <div class="layui-input-inline">
          <select name="halfTime" id="halfTime" lay-verify="required">
            <option value=""></option>
          </select>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label"></label>
        <div class="layui-input-inline">
          <button class="layui-btn">确定信息</button>
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label"></label>
        <div class="layui-input-block">
          <table class="layui-table">
            <thead>
            <tr>
              <th>服务项目</th>
              <th>商品品类</th>
              <th>服务数量</th>
              <th>项目价格</th>
              <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>贤心</td>
              <td>贤心</td>
              <td>贤心</td>
              <td>
                <button class="layui-btn f_l layui-btn-primary">-</button>
                <div class="layui-input-inline" style="margin-right: 0">
                  <input class="layui-input">
                </div>
                <button class="layui-btn f_l layui-btn-primary">+</button>
              </td>
              <td>人生就像是一场修行</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="green_title fs20 mb20">
      <span class="t_r d_i">店铺信息</span>
    </div>
    <table class="layui-table" lay-even lay-skin="nob">
      <tbody>
      <tr>
        <td>指派店铺：<span>指派店铺</span></td>
        <td></td>
        <td>商户名：<span>商户名</span></td>
        <td></td>
      </tr>
      </tbody>
    </table>
    <div class="green_title fs18 mb20">
      <span class="t_r d_i">优惠券信息</span>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label" style="padding: 0;width: 105px">优惠券编号：</label>
      <div class="layui-input-inline">
        <input type="text" required lay-verify="required" placeholder="请输入优惠券编号" autocomplete="off" class="layui-input">
      </div>
      <button class="layui-btn">使用优惠券</button>
    </div>
    <div class="green_title fs20 mb20">
      <span class="t_r d_i">金额信息</span>
    </div>
    <table class="layui-table" lay-even lay-skin="nob" id="money_table">
      <tbody>
      <tr>
        <td>服务金额</td>
        <td>1</td>
        <td>优惠券</td>
        <td>1</td>
        <td>应付价格</td>
        <td>1</td>
      </tr>
      <tr>
        <td>平台抽成</td>
        <td>1</td>
        <td>商家结算</td>
        <td>1</td>
        <td>渠道运营商</td>
        <td>1</td>
      </tr>
      <tr>
        <td>定金金额</td>
        <td>1</td>
        <td>补差价</td>
        <td>1</td>
        <td>实付金额</td>
        <td>1</td>
      </tr>

      </tbody>
    </table>
    <div class="layui-form-item layui-form-text">
      <label class="layui-form-label">订单备注</label>
      <div class="layui-input-block">
        <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item">
      <label class="layui-form-label"></label>
      <div class="layui-input-block">
        <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
      </div>
    </div>
  </form>
</div>
<div id="l-map"></div>

</body>
<script src="../lib/jquery-1.9.1.min.js"></script>
<script src="../lib/layui-1.0.9/build/layui.js"></script>
<script src="https://api.map.baidu.com/api?v=2.0&ak=tNWXrXQyTcAtAWvhVUL4ORBmf5aQ4Rba&s=1"></script>
<script src="../utils/util.js"></script>
<script src="../js/addOrder.js"></script>

<script type="text/javascript">
  // 百度地图API功能
  function G(id) {
    return document.getElementById(id);
  }

  var map = new BMap.Map("l-map");
  map.centerAndZoom("北京",12);                   // 初始化地图,设置城市和地图级别。

  var ac = new BMap.Autocomplete(    //建立一个自动完成的对象
    {"input" : "suggestId"
      ,"location" : map
    });

  ac.addEventListener("onhighlight", function(e) {  //鼠标放在下拉列表上的事件
    var str = "";
    var _value = e.fromitem.value;
    var value = "";
    if (e.fromitem.index > -1) {
      value = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
    }
    str = "FromItem<br />index = " + e.fromitem.index + "<br />value = " + value;

    value = "";
    if (e.toitem.index > -1) {
      _value = e.toitem.value;
      value = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
    }
    str += "<br />ToItem<br />index = " + e.toitem.index + "<br />value = " + value;
    G("searchResultPanel").innerHTML = str;
  });

  var myValue;
  ac.addEventListener("onconfirm", function(e) {    //鼠标点击下拉列表后的事件
    var _value = e.item.value;
    myValue = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
    G("searchResultPanel").innerHTML ="onconfirm<br />index = " + e.item.index + "<br />myValue = " + myValue;

    setPlace();
  });

  function setPlace(){
    map.clearOverlays();    //清除地图上所有覆盖物
    function myFun(){
      var pp = local.getResults().getPoi(0).point;    //获取第一个智能搜索的结果
      map.centerAndZoom(pp, 18);
      map.addOverlay(new BMap.Marker(pp));    //添加标注
    }
    var local = new BMap.LocalSearch(map, { //智能搜索
      onSearchComplete: myFun
    });
    local.search(myValue);
  }
</script>
</html>
